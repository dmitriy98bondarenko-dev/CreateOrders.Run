/* === modals.css === */

/* ---------- Modals ---------- */
.modal{position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center; z-index:10000}
.modal[hidden]{display:none}

.modalActions{display:flex; justify-content:flex-end; gap:10px; margin-top:16px}
.modalActions button{min-width:80px; padding:8px 14px; border-radius:8px; font-size:14px}
.auth-ok{background:#10b981; color:#fff; border:none}
.auth-bad{background:var(--chip-bg); color:var(--fg)}
.authState{font-size:12px; color:#065f46}
[data-theme="dark"] .authState{color:#34d399}


.modalCard{width:520px; max-width:90%; max-height:80vh; overflow:auto; background:var(--panel); border:1px solid var(--divider); border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.08); padding:20px}
.modalCard .row input{width:100%; padding:10px 12px; border-radius:8px; border:1px solid var(--divider); font-size:14px; background:#0000; color:var(--fg)}


#authModal .modalCard{
    width: 760px;
    max-width: 92vw;
    padding: 24px 28px;
    border-radius: 14px;
    border: 1px solid var(--divider);
    box-shadow: 0 20px 60px rgba(0,0,0,.18);
}
#authModal .modalCard h3{
    font-size: 24px;
    line-height: 1.25;
    font-weight: 800;
    margin: 0 0 18px 0;
    color: var(--ink);
}
#authModal .row{ display: block; padding: 0; margin: 6px 0 0 0; }
#authModal .row::before{
    content: "Value:";
    display: block;
    font-weight: 700;
    color: var(--muted);
    margin: 0 0 6px 0;
}
#authModal .row input{
    width: 100%;
    height: 48px;
    padding: 10px 12px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 14px;
    border-radius: 10px;
    border: 1px solid var(--divider);
    background: #0000;
    color: var(--fg);
}
#authModal .authState{ margin-top: 12px; font-size: 13px; color: #065f46; }
[data-theme="dark"] #authModal .authState{ color:#34d399; }
#authModal .modalActions{
    display: flex; justify-content: flex-end; align-items: center; gap: 10px; margin-top: 18px;
}
#authModal .modalActions > div{ display: flex; gap: 10px; align-items: center; }
#authModal .modalActions button{
    padding: 10px 18px; border-radius: 10px; font-size: 14px; font-weight: 700;
}
#authModal #authSave{   order: 1; background: #10b981; color: #fff; border: none; }
#authModal #authSave:hover{ filter: brightness(1.05); }
#authModal #authCancel{ order: 2; background: var(--panel); color: var(--fg); border: 1px solid var(--divider); }
#authModal #authCancel:hover{ filter: brightness(1.02); }
#authModal #authClear{  order: 3; background: var(--soft); color: var(--muted); border: 1px solid var(--divider); }
[data-theme="dark"] #authModal #authClear{
    color: var(--muted); background: #121a2a; border-color: #25314a;
}
/* === Environment modal – overlay с блюром + фиксы === */
#varsModal.modal{
    background: rgba(2, 6, 23, .58);
    backdrop-filter: saturate(1.2) blur(2px);
}
html:has(#varsModal:not([hidden])){ overflow: hidden; }

#varsModal .modalCard{
    position: relative;
    overflow: visible;
    width: 760px;
    max-width: 92vw;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    padding: 24px 28px;
    border-radius: 14px;
    border: 1px solid var(--divider);
    background: var(--panel);
    box-shadow: 0 20px 60px rgba(0,0,0,.18);
    animation: fadeIn .25s ease, scaleIn .25s ease;
}

#varsModal .modalCard h3{
    position: sticky;
    top: 0;
    background: var(--panel);
    padding-bottom: 10px;
    margin: 0 0 14px 0;
    font-size: 20px;
    font-weight: 800;
    color: var(--ink);
    border-bottom: 1px solid var(--divider);
    z-index: 2;
}

#varsModal .kvs{
    flex: 1;
    overflow: auto;
    border: 1px solid var(--divider);
    border-radius: 10px;
    margin-bottom: 18px;
    padding: 0;
}

#varsModal .modalActions{
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    margin-top: 12px;
    position: sticky;
    bottom: 0;
    background: var(--panel);
    padding-top: 12px;
    border-top: 1px solid var(--divider);
}

#varsModal .modalActions button,
#varsModal .modalActions label.file{
    padding: 10px 18px;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
}

#varsModal #varsSave{
    background: #10b981;
    color: #fff;
    border: none;
}
#varsModal #varsSave:hover{ filter: brightness(1.05); }

#varsModal #varsCancel{
    background: var(--panel);
    color: var(--fg);
    border: 1px solid var(--divider);
}
#varsModal #varsCancel:hover{ filter: brightness(1.02); }

#varsModal label.file{
    background: var(--soft);
    color: var(--muted);
    border: 1px dashed var(--divider);
}
#varsModal label.file:hover{ filter: brightness(1.05); }

/* === Modal for variable edit === */
#varEditModal.modal {
    background: rgba(2, 6, 23, .58);
    backdrop-filter: saturate(1.2) blur(2px);
}
html:has(#varEditModal:not([hidden])) { overflow: hidden; }

#varEditModal .modalCard {
    width: 420px;
    max-width: 92vw;
    padding: 20px 24px;
    border-radius: 12px;
    border: 1px solid var(--divider);
    background: var(--panel);
    box-shadow: 0 20px 60px rgba(0,0,0,.18);
}

#varEditModal .modalCard h3 {
    font-size: 18px;
    font-weight: 700;
    margin: 0 0 14px 0;
    color: var(--ink);
}

#varEditModal .row {
    display: block;
    margin: 10px 0;
}
#varEditModal .row input {
    width: 100%;
    padding: 10px 12px;
    border-radius: 8px;
    border: 1px solid var(--divider);
    font-size: 14px;
    background: #0000;
    color: var(--fg);
}

#varEditModal .modalActions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 18px;
}
#varEditModal .modalActions button {
    padding: 8px 14px;
    border-radius: 8px;
    font-size: 14px;
}
#varEditModal #varEditSave { background:#10b981; color:#fff; border:none; }
#varEditModal #varEditCancel { background:var(--panel); color:var(--fg); border:1px solid var(--divider); }
.dropdown {
    position: relative;
    display: inline-block;
}

/* === Modal for variable edit (styled, как на скрине 2) === */
#varEditModal.modal {
    background: rgba(2, 6, 23, .58);
    backdrop-filter: saturate(1.2) blur(2px);
}
html:has(#varEditModal:not([hidden])) { overflow: hidden; }

#varEditModal .modalCard {
    width: 420px;
    max-width: 92vw;
    padding: 20px 24px;
    border-radius: 12px;
    border: 1px solid var(--divider);
    background: var(--panel);
    box-shadow: 0 20px 60px rgba(0,0,0,.18);
}

#varEditModal .modalCard h3 {
    font-size: 18px;
    font-weight: 700;
    margin: 0 0 14px 0;
    color: var(--ink);
}

#varEditModal .row {
    display: block;
    margin: 10px 0;
}
#varEditModal .row input {
    width: 100%;
    height: 44px;
    padding: 10px 12px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 14px;
    border-radius: 8px;
    border: 1px solid var(--divider);
    background: #0000;
    color: var(--fg);
}

#varEditModal .modalActions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 18px;
}
#varEditModal .modalActions button {
    padding: 8px 16px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
}
#varEditModal #varEditCancel {
    background: var(--panel);
    color: var(--fg);
    border: 1px solid var(--divider);
}
#varEditModal #varEditSave {
    background: #10b981;
    color: #fff;
    border: none;
}
#varEditModal #varEditSave:hover { filter: brightness(1.05); }

/* Vars */
.varsTable{ width:100%; border-collapse:collapse; font-size:14px; background:#0000 }
.varsTable th,.varsTable td{ border-bottom:1px solid var(--divider); padding:8px }
.varsTable th{ position:sticky; top:0; z-index:2; background:var(--soft); color:var(--muted); font-weight:600; text-align:left; box-shadow:0 2px 0 var(--divider); }
.varsTable td input[type="text"]{ width:100%; padding:6px 8px; border:1px solid var(--divider); border-radius:6px; font-size:13px; background:#0000; color:var(--fg) }
.varsTable td input[type="checkbox"]{ width:auto; margin:auto; display:block; }
.varsHelp{ font-size:12px; color:var(--muted); }

#varsModal .dropdown {
    position: relative;
    display: inline-block;
}


#varsModal .jsonMenuBtn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: var(--soft);
    color: var(--muted);
    border: 1px solid var(--divider);
    border-radius: 8px;
    padding: 8px 14px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
}
#varsModal .jsonMenuBtn svg,
#varsModal .dropdown-content svg {
    width: 18px;
    height: 18px;
    stroke: currentColor;
    flex-shrink: 0;
}

/* json Dropdown */
#varsModal .dropdown-content {
    position: absolute;
    top: 100%;
    left: 0;
    background: var(--panel);
    border: 1px solid var(--divider);
    border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    min-width: 180px;
    z-index: 200;
    display: none;
    flex-direction: column;
    padding: 4px 0;
}

#varsModal .dropdown-content button {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: none;
    border: none;
    font-size: 14px;
    font-weight: 500;
    color: var(--fg);
    cursor: pointer;
    width: 100%;
    text-align: left;
}

#varsModal .dropdown-content button:hover {
    background: var(--soft);
}

#varsModal .dropdown.open .dropdown-content {
    display: flex;
}

.jsonMenuBtn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: transparent;
    cursor: pointer;
}

.jsonMenuBtn.active {
    background: var(--soft);
    border-radius: 6px;
}

.modalCard {
    position: relative;
}.modalHeader {
     display: flex;
     justify-content: space-between;
     align-items: flex-start;
     margin-bottom: 16px; /* одинаковый отступ для всех модалок */
 }

.modalHeader h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: var(--ink);
}

.modalClose {
    margin-top: 2px;
    font-size: 20px;
    font-weight: 600;
    border: none;
    background: transparent;
    color: var(--muted);
    cursor: pointer;
    line-height: 1;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modalClose:hover {
    color: var(--fg);
}
