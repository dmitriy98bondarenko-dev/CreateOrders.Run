
/* Переменные {{var}} внутри JSON */
.json-var {
  color:#D7BA7D;
  background:#fff0;
  border-radius:3px;
  padding:0 2px;
  font-style:italic;
}
[data-theme="dark"] .json-var {
  color:#FFD580;
  background:#0000;
}

.var-missing {
  color: #7a1d16 !important;
  background: #fff0f0 !important;
  border: 1px solid #ffc0b6 !important;
  border-radius: 6px;
}
[data-theme="dark"] .var-missing {
  background: #3b1f23 !important;
  color: #ffd1d6 !important;
  border-color: #63313a !important;
}
.var-token {
  padding: 1px 3px;
  border-radius: 4px;
  cursor: pointer;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
}
.var-token.missing {
  background: #fff0f0;
  border: 1px solid #ffc0b6;
  color: #7a1d16;
}
[data-theme="dark"] .var-token.missing {
  background: #3b1f23;
  border-color: #63313a;
  color: #ffd1d6;
}
.var-token.filled {
  background: #f0fdf4;
  border: 1px solid #bbf7d0;
  color: #166534;
}
[data-theme="dark"] .var-token.filled {
  background: #12291c;
  border-color: #1d3b2a;
  color: #4ade80;
}


/* Кнопка Copy cURL (disabled) */
.respTools button:disabled,
.reqBodyToolbar button:disabled {
  background:#1f2937 !important;
  color:#6b7280 !important;
  border:1px solid #374151 !important;
  opacity:0.7;
}
.reqBodyToolbar {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0;
    border-bottom: 1px solid var(--divider);
    font-size: 13px;
    font-weight: 600;
    background: var(--soft);
}
/* Унифицируем JSON-редакторы */
.reqBodyWrap pre,
.reqBodyWrap code,
.reqBodyWrap textarea,

/* === Request body editor (новый <pre><code contenteditable>) === */
.reqBodyWrap pre.code-editor {
    margin: 0;
    border-radius: 0;
    min-height: 220px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 13px;
    line-height: 1.45;
    padding: 12px;
    background: var(--panel);
    color: var(--fg);
    overflow: auto;
  display: block;
  width: 100%;
  resize: vertical;
  border: 1px solid var(--divider);
  background: var(--panel);
  box-sizing: border-box;
}

.reqBodyWrap pre.code-editor code {
  display: block;
  white-space: pre-wrap;
  word-wrap: break-word;
  outline: none;
}

/* Dark theme */
[data-theme="dark"] .reqBodyWrap pre.code-editor {
  background: #111827;
  color: #f3f4f6;
  border: 1px solid #374151;
}
.env-select {
  margin-left: 8px;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  background: var(--panel);
  border: 1px solid var(--divider);
  cursor: pointer;
}
.env-select option {
  font-weight: 500;
}
/* env Dropdown */

.envDropdown {
  margin-left: 8px;
  position: relative;
  display: inline-block;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  user-select: none;
}

.envList {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  min-width: 100%;
  border: 1px solid var(--divider);
  border-radius: 6px;
  background: var(--panel);
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  z-index: 1000;
  display: none;
}
.envOption {
  padding: 8px 12px;
  cursor: pointer;
  font-weight: 600;
  border-radius: 4px;
}
.envOption.dev    { color: #16a34a; }
.envOption.staging{ color: #ca8a04; }
.envOption.prod   { color: #dc2626; }

.envOption:hover {
  background: var(--soft);
  filter: brightness(0.95);
}

/* === Env dropdown button (унификация с Authorize / VarsBtn) === */
.envCurrent {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    height: 36px;
    padding: 0 14px;
    font-size: 14px;
    font-weight: 600;
    line-height: 1;
    border-radius: 6px;
    border: 2px solid transparent;
    background: transparent;
    cursor: pointer;
    box-sizing: border-box;
    transition: border-color 0.2s, color 0.2s;/* ---------- Theme tokens ---------- */
    :root{
        --bg:#f6f8fb; --panel:#ffffff; --muted:#6b7280; --fg:#0a0d14; --accent: #6c6c70;
        --ok:#16a34a; --warn:#b45309; --err:#dc2626; --divider:#e5e7eb; --code:#0f172a;
        --soft:#f9fafb; --ink:#0b1220; --pill:#ffffff;
        --chip-bg:#f3f4f6; --chip-bg-2:#ffefd2; --chip-fg:#8a5a00;
        --op-get:#e8f5ee; --op-get-b:#dff3e7; --op-get-f:#0a7c3a;
        --op-post:#f3e9ff; --op-post-b:#efe4ff; --op-post-f:#7a3cff;
        --op-put:#f6f7dd; --op-put-b:#f2f4c9; --op-put-f:#7a7f17;
        --op-patch:#ffe9d9; --op-patch-b:#ffe1cd; --op-patch-f:#c05621;
        --op-del:#ffe5e7; --op-del-b:#ffdadd; --op-del-f:#c81e1e;
        --op-other:#eaf2ff; --op-other-b:#e2ecff; --op-other-f:#0b6cff;
    }
    [data-theme="dark"] {
        --bg:#0d1117;        /* общий фон */
        --panel:#161b22;     /* панели (чуть светлее фона) */
        --soft:#1f2937;      /* ещё светлее, для карточек */
        --muted:#9ca3af;
        --fg:#e5e7eb;
        --ink:#f9fafb;
        --divider:#2d3748;
        --accent: #6c6c70;

        --ok:#22c55e;
        --warn:#eab308;
        --err:#f87171;

        /* API методы */
        --op-get:#052e16;   --op-get-b:#14532d; --op-get-f:#4ade80;
        --op-post:#1e1b4b;  --op-post-b:#312e81; --op-post-f:#c4b5fd;
        --op-put:#422006;   --op-put-b:#713f12; --op-put-f:#facc15;
        --op-patch:#451a03; --op-patch-b:#9a3412; --op-patch-f:#fb923c;
        --op-del:#450a0a;   --op-del-b:#7f1d1d; --op-del-f:#fca5a5;
        --op-other:#172554; --op-other-b:#1e3a8a; --op-other-f:#60a5fa;
    }

    /* Request body wrapper */
    .reqBodyWrap {
        margin: 16px 12px;
        border: 1px solid var(--divider);
        border-radius: 8px;
        background: var(--panel);
        overflow: hidden;
    }

    [data-theme="dark"] .reqBodyWrap {
        background: #1f2937;
        border-top: 2px solid #374151;
    }

    .reqHeader select {
        background: var(--chip-bg);
        font-weight: 700;
        cursor: pointer;
        min-width: 90px;
        border-right: 1px solid var(--divider);
    }

    .reqHeader input {
        flex: 1;
        min-width: 0;
    }

    .reqHeader .send {
        background: var(--accent);
        color: #fff;
        font-weight: 700;
        border: none;
        padding: 0 18px;
        cursor: pointer;
    }
    .methodList {
        position: absolute;
        top: 100%; left: 0; right: 0;
        border: 1px solid var(--divider);
        border-radius: 6px;
        overflow: hidden;
        z-index: 10;
    }
    .methodOption {
        padding: 8px 12px;
        font-size: 14px;
    }
    .methodOption:hover {
        filter: brightness(1.1);
    }
    .var-token {
        padding: 1px 3px;
        border-radius: 4px;
        cursor: pointer;
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    }
    .var-token.missing {
        background: #fff0f0;
        border: 1px solid #ffc0b6;
        color: #7a1d16;
    }
    [data-theme="dark"] .var-token.missing {
        background: #3b1f23;
        border-color: #63313a;
        color: #ffd1d6;
    }
    .var-token.filled {
        background: #f0fdf4;
        border: 1px solid #bbf7d0;
        color: #166534;
    }
    [data-theme="dark"] .var-token.filled {
        background: #12291c;
        border-color: #1d3b2a;
        color: #4ade80;
    }
    .reqHeader .urlWrap {
        display: block;
        width: 100%;
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
        font-size: 14px;
        padding: 6px 8px;
        background: #0000;
        border: 1px solid transparent;
        border-radius: 6px;
        min-height: 30px;
        line-height: 1.4;
        overflow-x: auto;
        white-space: nowrap;
    }
    /* === Hover fix (только токены) === */
    .var-token:hover { filter: brightness(1.15); }

    /* === Fix URL row layout === */
    .reqHeader {
        display: grid;
        grid-template-columns: 120px 1fr 120px; /* метод | URL | кнопка */
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        background: #fff7e8;
        border-bottom: 1px solid var(--divider);
    }
    [data-theme="dark"] .reqHeader { background:#2a1f0f; }

    .reqHeader .urlWrap {
        display: block;
        width: 100%;
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
        font-size: 14px;
        padding: 6px 8px;
        background: #0000;
        border: 1px solid transparent;
        border-radius: 6px;
        min-height: 30px;
        line-height: 1.4;
        overflow-x: auto;
        white-space: nowrap;
    }

    .reqHeader .send {
        width: 100%;
        height: 100%;
        background: var(--accent);
        color: #fff;
        font-weight: 700;
        border: none;
        cursor: pointer;
        border-radius: 6px;
    }
    .logo-icon {
        height: 28px;
        width: auto;
        margin-right: 8px;
    }
    /* === Dark theme fixes for request/response panels === */
    [data-theme="dark"] .reqHeader {
        background:#1e293b;  /* тёмно-серый, читаемый */
    }

    [data-theme="dark"] .reqBodyWrap {
        background:#1f2937;
        color:#f3f4f6;
    }

    [data-theme="dark"] .respHeader {
        background:#1e293b;
    }
    [data-theme="dark"] .respBody {
        background:#111827;
    }
    [data-theme="dark"] .respTools {
        background:#1f2937;
    }
    /* Кнопка Copy cURL (disabled) */
    .respTools button:disabled,
    .reqBodyToolbar button:disabled {
        background:#1f2937 !important;
        color:#6b7280 !important;
        border:1px solid #374151 !important;
        opacity:0.7;
    }
    /* Унифицируем JSON-редакторы */
    .reqBodyWrap pre,
    .reqBodyWrap code,
    .reqBodyWrap textarea,

    .env-select {
        margin-left: 8px;
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        background: var(--panel);
        border: 1px solid var(--divider);
        cursor: pointer;
    }
    .env-select option {
        font-weight: 500;
    }


    /* Анимации */
    @keyframes fadeIn {
        to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeOut {
        to { opacity: 0; transform: translateY(-10px); }
    }
    /* ============================= */

    /* === Env dropdown button (унификация с Authorize / VarsBtn) === */
    .envCurrent {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        height: 36px;
        padding: 0 14px;
        font-size: 14px;
        font-weight: 600;
        line-height: 1;
        border-radius: 6px;
        border: 2px solid transparent;
        background: transparent;
        cursor: pointer;
        box-sizing: border-box;
        transition: border-color 0.2s, color 0.2s;
    }

    .envCurrent.dev    { border-color: #16a34a; color: #16a34a; }
    .envCurrent.staging{ border-color: #ca8a04; color: #ca8a04; }
    .envCurrent.prod   { border-color: #dc2626; color: #dc2626; }

}

.envCurrent.dev    { border-color: #16a34a; color: #16a34a; }
.envCurrent.staging{ border-color: #ca8a04; color: #ca8a04; }
.envCurrent.prod   { border-color: #dc2626; color: #dc2626; }

.respHeader {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 12px;
    border-bottom: 1px solid var(--divider);
    font-size: 14px;
    font-weight: 500;
}

.statusPill {
    display: inline-block;
    min-width: 40px;
    text-align: center;
    padding: 2px 10px;
    border-radius: 16px;
    font-weight: 600;
    font-size: 13px;
    background: #eee;
    color: #111;
}
.statusPill.ok { background: #16a34a; color: #fff; }
.statusPill.err { background: #dc2626; color: #fff; }

.respMeta {
    color: #555;
}

pre.headers {
    background: #f9fafb;
    border: 1px solid var(--divider);
    border-radius: 6px;
    margin: 8px 0;
    padding: 12px;
    font-size: 12px;
    color: #374151;
}
/* Response card */
.respCard { background: var(--panel); border:1px solid var(--divider); border-radius:8px; margin:12px 0; }

.tabPanes { padding: 6px;
color: #fff0f0}

.tabPane { display:none; }
.tabPane.active { display:block; }
pre {
    white-space: pre-wrap;
    word-break: break-word;
    overflow-x: auto;
}
/* ---------- Response Title ---------- */
.respTitle {
    background: #0000;
    margin: 0;
    padding: 14px;
    font-size: 14px;
    font-weight: 700;
    letter-spacing: .2px;
    color: var(--ink);
    background: var(--soft);
    border-bottom: 1px solid var(--divider);
    line-height: 1.4;
    height: 48px;             /* фиксированная высота */
    display: flex;
    align-items: center;
}
.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0,0,0,0);
    white-space: nowrap;
    border: 0;
}

/* общий JSON стиль */
.json-key    { color:#569CD6; font-weight:500; }
.json-string { color:#CE9178; }
.json-number { color:#B5CEA8; }
.json-boolean{ color:#4EC9B0; font-weight:500; }
.json-null    { color: #e06c75; }   /* красный */
.json-url    { color:#D7BA7D; text-decoration:underline; cursor:pointer; }

/* Редактор тела запроса */
.reqBodyWrapInner {
    padding: 0;
    position: relative;
    height: 300px; /* можно подогнать под себя */
}

.reqBodyWrapInner textarea.bodyEditor,
.reqBodyWrapInner pre.bodyHighlight {
    font-family: monospace;
    font-size: 13px;
    line-height: 1.4;
    padding: 8px;
    margin: 0;
    border: none;
    outline: none;
    white-space: pre;
    overflow: auto;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
}

.reqBodyWrapInner textarea.bodyEditor {
    position: absolute;
    inset: 0;
    background: transparent;
    color: transparent;     /* текст скрыт */
    caret-color: black;     /* курсор чёрный */
    resize: none;
    z-index: 2;
}

.reqBodyWrapInner pre.bodyHighlight {
    pointer-events: none;   /* клики проходят сквозь */
    z-index: 1;
}
